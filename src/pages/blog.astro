---
// src/pages/blog.astro
import Layout from '../layouts/Layout.astro';
import posts from '../data/posts.json';

// è·å–åšå®¢æ–‡ç« 
const allPosts = await Astro.glob('../content/blog/*.md');
---

<Layout title="åšå®¢">
    <div class="max-w-4xl mx-auto">
        <!-- æ ‡é¢˜ -->
        <div class="mb-12">
            <h1 class="text-4xl font-bold mb-4">åšå®¢æ–‡ç« </h1>
            <p class="text-gray-600 dark:text-gray-400">è¿™é‡Œè®°å½•æˆ‘çš„æ€è€ƒã€å­¦ä¹ å’Œé¡¹ç›®</p>
        </div>

        <!-- æ–‡ç« åˆ—è¡¨ -->
        <div class="space-y-8">
            {allPosts.map(post => (
                <article class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-shadow">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h2 class="text-2xl font-bold mb-2">
                                <a href={`/blog/${post.frontmatter.slug || post.frontmatter.title.toLowerCase().replace(/\s+/g, '-')}`}
                                   class="hover:text-purple-600 transition-colors">
                                    {post.frontmatter.title}
                                </a>
                            </h2>
                            <p class="text-gray-600 dark:text-gray-400 mb-4">
                                {post.frontmatter.description}
                            </p>
                        </div>
                        <span class="px-3 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded-full text-sm">
                            {post.frontmatter.tags?.[0] || 'æœªåˆ†ç±»'}
                        </span>
                    </div>

                    <div class="flex items-center justify-between text-sm text-gray-500 dark:text-gray-400">
                        <div class="flex items-center space-x-4">
                            <span>ğŸ“… {new Date(post.frontmatter.pubDate || post.frontmatter.date).toLocaleDateString('zh-CN')}</span>
                            <span>ğŸ‘¤ {post.frontmatter.author || 'åæ–¹ç©ºçƒ¬'}</span>
                            <span>â±ï¸ {post.frontmatter.readTime || '3åˆ†é’Ÿ'}</span>
                        </div>
                        <a href={`/blog/${post.frontmatter.slug || post.frontmatter.title.toLowerCase().replace(/\s+/g, '-')}`}
                           class="text-purple-600 hover:text-purple-800 dark:text-purple-400 dark:hover:text-purple-300">
                            é˜…è¯»å…¨æ–‡ â†’
                        </a>
                    </div>
                </article>
            ))}
        </div>
    </div>
</Layout>